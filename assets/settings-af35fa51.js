import{O as h,s as u,r as x,j as e,_ as l}from"./index-e267a7dd.js";import{P as n}from"./index.esm-daa111ac.js";import{I as d}from"./input-17cf5bfb.js";import{B as y}from"./button-21a5ed99.js";const p=new h(u);function N(){const[o,w]=x.useState({retypeyournewpassword:"",oldpassword:"",newpassword:""}),r=s=>{const{name:a,value:t}=s.target;w(m=>({...m,[a]:t}))},c=async()=>{var s;try{const a=(s=p.authStore.model)==null?void 0:s.id,t={password:o.newpassword,oldPassword:o.oldpassword,passwordConfirm:o.newpassword};a&&(await p.collection("users").update(a,t),p.authStore.clear(),window.location.replace("/login"))}catch(a){throw new a}},i=s=>{o.newpassword!==o.retypeyournewpassword?l("New password and Re-type new password does not match"):(s.preventDefault(),l.promise(c(),{loading:"Updating...",success:e.jsx("b",{children:"Password changed successfully!"}),error:e.jsx("b",{children:"Something went wrong!"})}))};return e.jsx("section",{className:"py-10 bg-primary px-6",children:e.jsxs("div",{className:"p-4 mx-auto shadow max-w-md sm:p-6 rounded-lg lg:p-8",children:[e.jsxs("div",{className:"text-center pb-4",children:[e.jsx("h2",{className:"text-3xl font-bold leading-tight text-secondary",children:"Change your password"}),e.jsx("p",{className:"max-w-md mx-auto my-2 text-base leading-relaxed text-secondary/50",children:"Enter your new-password and re-type you new password then you are ready to go"})]}),e.jsxs("form",{onSubmit:i,children:[e.jsx(d,{title:"Old Password",type:"password",placeholder:"Enter your old password here...",handle_input_change:r,icon:n}),e.jsx("div",{className:"h-1"}),e.jsx(d,{title:"New Password",type:"password",placeholder:"Enter your new-password here...",handle_input_change:r,icon:n}),e.jsx("div",{className:"h-1"}),e.jsx(d,{title:"Retype your new Password",type:"password",placeholder:"Re-enter your new password here...",handle_input_change:r,icon:n}),e.jsx("div",{className:"h-3"}),e.jsx(y,{type:"submit",name:"Update my password"})]})]})})}export{N as default};
