import{O as y,s as j,r as b,j as e,h as L,_ as l,i as a,a as r}from"./index-e267a7dd.js";import{I as d}from"./input-17cf5bfb.js";import{B as v}from"./button-21a5ed99.js";import{P as F}from"./index.esm-daa111ac.js";import{d as _}from"./index.esm-8cb1fc4b.js";const s=new y(j);function A(){const[u,m]=b.useState({username:"",password:""}),c=t=>{const{name:o,value:i}=t.target;m(n=>({...n,[o]:i}))},p=async()=>{try{const{username:t,password:o}=u,i=await s.collection("users").authWithPassword(t,o),n=await s.collection("profiles").getFullList({sort:"-created",filter:`id = "${i.record.reference}"`});a(n,`${r}`,"profile");const f=await s.collection("profiles").getFullList({sort:"-created",filter:'Account_type = "Factory"'});a(f,`${r}`,"factories");const x=await s.collection("profiles").getFullList({sort:"-created",filter:'Account_type = "Warehouse"'});a(x,`${r}`,"warehouses");const w=await s.collection("rating").getFullList({sort:"-created",filter:'Type = "Leaf"'});a(w,`${r}`,"leafs");const g=await s.collection("rating").getFullList({sort:"-created",filter:'Type = "Liquor"'});a(g,`${r}`,"liquors"),window.location.replace("/dashboard")}catch(t){l.error(t)}},h=async t=>{t.preventDefault(),l.promise(p(),{loading:"Please wait...",success:e.jsx("b",{children:"Login successfull"}),error:e.jsx("b",{children:"Login failed, Retry login with correct credentials"})})};return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"mx-auto shadow sm:p-8 p-4 max-w-md rounded-lg mt-12",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold leading-tight text-black",children:"Welcome Back!"}),e.jsx("p",{className:"max-w-md  my-2 text-base text-black/50",children:"Enter your username and password to login"})]}),e.jsxs("form",{onSubmit:h,children:[e.jsx(d,{title:"Username",type:"text",placeholder:"Enter your username here...",handle_input_change:c,icon:_}),e.jsx("div",{className:"h-2"}),e.jsx(d,{title:"Password",type:"password",placeholder:"Enter your password here...",handle_input_change:c,icon:F}),e.jsx("div",{className:"h-3"}),e.jsx(v,{name:"Login",type:"submit",icon:L})]})]})})}export{A as default};
